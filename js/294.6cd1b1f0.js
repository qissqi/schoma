"use strict";(self["webpackChunkicebee_web"]=self["webpackChunkicebee_web"]||[]).push([[294],{1108:function(e,t){t.Z={setcookie(e,t,a,o,r,i){let l=e+"="+encodeURIComponent(t);if(a){let e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3),l+="; expires="+e.toUTCString()}o&&(l+="; path="+o),r&&(l+="; domain="+r),i&&(l+="; secure"),document.cookie=l},getcookie(e){let t=e+"=",a=document.cookie.split(";");for(let o=0;o<a.length;o++){let e=a[o].trim();if(0===e.indexOf(t))return decodeURIComponent(e.substring(t.length))}return null},deleteCookie(e,t,a){getCookie(e)&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"),t&&(document.cookie=e+"=; path="+t),a&&(document.cookie=e+"=; domain="+a)}}},5705:function(e,t,a){var o=a(6513);t.Z={get_courses(e){return console.log(e),(0,o.Z)({url:"/teacher/teacherCourse",method:"get",params:e})},get_courses_detail(e){return console.log(e),(0,o.Z)({url:"/teacher/courseDetail",method:"get",params:e.course_id})},get_applications(e){return(0,o.Z)({url:"/teacher/teacherApplication",method:"get",params:e})},get_application_detail(e){return(0,o.Z)({url:"/teacher/applicationDetail",method:"get",params:e.application_id})},apply_for_course(e){return(0,o.Z)({url:"/teacher/applyCourse",method:"post",data:e})},giveScoreForm(e){return(0,o.Z)({url:"/teacher/giveScoreForm",method:"get",params:e})},getStudentScore(e){return(0,o.Z)({url:"/teacher/giveScoreForm",method:"get",params:e})},giveScore(e){return(0,o.Z)({url:"/teacher/giveScore",method:"post",data:e})},scoreAnalyse(e){return(0,o.Z)({url:"/teacher/scoreAnalyse",method:"get",params:e})},getCourseName(e){return(0,o.Z)({url:"/teacher/getCourseName",method:"get",params:e})},ice_bee(){return(0,o.Z)({url:"/icebee",method:"get"})}}},294:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var o=a(3396),r=a(7139);const i=(0,o._)("h1",{style:{"font-size":"25px"}},"申请列表",-1);function l(e,t,a,l,n,s){const c=(0,o.up)("a-divider"),d=(0,o.up)("a-button"),u=(0,o.up)("a-space"),p=(0,o.up)("a-layout-header"),_=(0,o.up)("a-tag"),g=(0,o.up)("a-table"),m=(0,o.up)("a-layout-content"),h=(0,o.up)("a-layout");return(0,o.wg)(),(0,o.j4)(h,{style:{height:"100vh"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{style:{"margin-left":"5%"}},{split:(0,o.w5)((()=>[(0,o.Wm)(c,{direction:"vertical"})])),default:(0,o.w5)((()=>[i,(0,o.Wm)(d,{type:"primary",loading:n.get_all_loading,onClick:s.reload,style:{float:"right"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(n.get_all_loading?"加载中":"重新加载"),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1}),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{columns:n.columns,data:n.applications,scroll:{x:1200,y:1200},bordered:{cell:!0},style:{width:"70%","margin-left":"5%"}},{status:(0,o.w5)((({record:e})=>[(0,o.Wm)(_,{size:"large",color:n.colors[e.application_status]},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.application_status),1)])),_:2},1032,["color"])])),optional:(0,o.w5)((({record:e})=>[(0,o.Wm)(d,{type:"outline",onClick:t=>s.detailPage(e.application_id)},{default:(0,o.w5)((()=>[(0,o.Uk)("详情")])),_:2},1032,["onClick"])])),_:1},8,["columns","data"])])),_:1})])),_:1})}a(560);var n=a(5705),s=a(1108),c=a(4870),d={data(){return{columns:(0,c.qj)([{title:"申请编号",dataIndex:"application_id"},{title:"课程名",dataIndex:"course_name"},{title:"最大可选人数",dataIndex:"max_student_number"},{title:"学分",dataIndex:"credit"},{title:"状态",slotName:"status"},{title:"处理人ID",dataIndex:"approved_by"},{title:"操作",slotName:"optional",fixed:"right"}]),applications:[],get_all_loading:!1,colors:{"待处理":"gold","已通过":"green","已拒绝":"red"}}},mounted(){this.get_applications()},methods:{detailPage(e){console.log(e),this.$router.push({path:"/teacher/application_detail",query:{application_id:e}})},reload(){this.get_applications()},set_get_all_btn_loading(e){this.get_all_loading=e},get_applications(){this.set_get_all_btn_loading(!0);var e=s.Z.getcookie("user_id");n.Z.get_applications({teacher_id:e}).then((e=>{if(this.set_get_all_btn_loading(!1),200==e.status_code){var t=[],a=[];t=e.data;for(let e=0;e<t.length;e++){var o="";switch(t[e].status){case"pending":o="待处理";break;case"approved":o="已通过";break;case"rejected":o="已拒绝";break;default:break}a.push({index:t.length-e,application_id:t[e].application_id,course_name:t[e].course_name,max_student_number:t[e].max_student_number,credit:t[e].credit,application_status:o,approved_by:t[e].approved_by}),a.sort(((e,t)=>e.index-t.index))}this.applications=a,console.log(a)}else this.$message.error(e.status_text)})).catch((e=>{this.set_get_all_btn_loading(!1),this.$message.error("加载失败"),console.error(e)}))}}},u=a(89);const p=(0,u.Z)(d,[["render",l]]);var _=p}}]);
//# sourceMappingURL=294.6cd1b1f0.js.map
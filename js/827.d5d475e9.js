"use strict";(self["webpackChunkicebee_web"]=self["webpackChunkicebee_web"]||[]).push([[827],{5349:function(e,r,t){var a=t(6513);r.Z={register_student(e){return(0,a.Z)({url:"/admin/register_student",method:"post",data:e})},get_department_and_major(){return(0,a.Z)({url:"/info/department_and_major",method:"get"})},register_teacher(e){return(0,a.Z)({url:"/admin/register_teacher",method:"post",data:e})},register_admin(e){return(0,a.Z)({url:"/admin/register_admin",method:"post",data:e})},get_courses_pending_approval_list(){return(0,a.Z)({url:"/admin/course/pending_list",method:"get"})},approve_course_application(e){return(0,a.Z)({url:"/admin/course/approve_application",method:"post",data:e})},get_courses_not_pending_approval_list(){return(0,a.Z)({url:"/admin/course/not_pending_list",method:"get"})},get_course_info_by_id(e){return(0,a.Z)({url:"/admin/course/info",method:"get",params:e})}}},827:function(e,r,t){t.r(r),t.d(r,{default:function(){return u}});var a=t(3396),d=t(7139);const m=(0,a._)("h1",{style:{"font-size":"25px"}},"录入学生账号",-1);function o(e,r,t,o,l,s){const n=(0,a.up)("a-form-item"),i=(0,a.up)("a-input"),u=(0,a.up)("a-option"),_=(0,a.up)("a-select"),f=(0,a.up)("a-date-picker"),p=(0,a.up)("a-divider"),g=(0,a.up)("a-button"),h=(0,a.up)("a-space"),c=(0,a.up)("a-form");return(0,a.wg)(),(0,a.j4)(c,{model:l.form,onSubmit:s.submit_register_form,style:{width:"60%","margin-top":"5%","margin-left":"10%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(n,{field:"user_id",label:"学号",rules:[{required:!0,message:"请输入学号"}],"validate-trigger":["change","input"]},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:l.form.user_id,"onUpdate:modelValue":r[0]||(r[0]=e=>l.form.user_id=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{field:"passwd",label:"密码",rules:[{required:!0,message:"请设置账号密码"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:l.form.passwd,"onUpdate:modelValue":r[1]||(r[1]=e=>l.form.passwd=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{field:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:l.form.name,"onUpdate:modelValue":r[2]||(r[2]=e=>l.form.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{field:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:l.form.gender,"onUpdate:modelValue":r[3]||(r[3]=e=>l.form.gender=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{value:"男"},{default:(0,a.w5)((()=>[(0,a.Uk)("男")])),_:1}),(0,a.Wm)(u,{value:"女"},{default:(0,a.w5)((()=>[(0,a.Uk)("女")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(n,{field:"department",label:"院系",rules:[{required:!0,message:"请选择院系"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:l.form.department,"onUpdate:modelValue":r[4]||(r[4]=e=>l.form.department=e),onChange:r[5]||(r[5]=()=>{this.form.major="",this.selected_department=this.department_and_major.find((e=>e.code===this.form.department))})},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.department_and_major,(e=>((0,a.wg)(),(0,a.j4)(u,{value:e.code},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(n,{field:"major",label:"专业",rules:[{required:!0,message:"请选择专业"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:l.form.major,"onUpdate:modelValue":r[6]||(r[6]=e=>l.form.major=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.selected_department.major,(e=>((0,a.wg)(),(0,a.j4)(u,{value:e.code,key:e.code},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(n,{field:"enrollment_date",label:"入学日期",rules:[{required:!0,message:"请选择入学日期"}]},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:l.form.enrollment_date,"onUpdate:modelValue":r[7]||(r[7]=e=>l.form.enrollment_date=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{split:(0,a.w5)((()=>[(0,a.Wm)(p,{direction:"vertical"})])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"primary","html-type":"submit",loading:l.register_loading},{default:(0,a.w5)((()=>[(0,a.Uk)(" 创建学生账号 ")])),_:1},8,["loading"]),(0,a.Wm)(g,{onClick:s.clear_form},{default:(0,a.w5)((()=>[(0,a.Uk)(" 清空输入 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])}var l=t(5349),s={data(){return{user_id:"",form:{user_id:"",passwd:"",name:"",gender:"",department:"",major:"",enrollment_date:""},selected_department:{},department_and_major:[],register_loading:!1}},mounted(){this.user_id=this.$route.query.user_id,this.get_department_and_major()},methods:{clear_form(){this.form.user_id="",this.form.passwd="",this.form.name="",this.form.gender="",this.form.department="",this.form.major="",this.form.enrollment_date=""},is_form_all_required_not_null(){return""!=this.form.user_id&&""!=this.form.passwd&&""!=this.form.name&&""!=this.form.gender&&""!=this.form.department&&""!=this.form.major&&""!=this.form.enrollment_date},set_is_register_btn_loading(e){this.register_loading=e},get_department_and_major(){l.Z.get_department_and_major().then((e=>{200==e.status_code?this.department_and_major=function(e){return Object.keys(e.codes).map((r=>{const t=e.names[r];return{code:r,name:t,major:e.codes[r].map((r=>({code:r,name:e.names[r]})))}}))}(e.data):this.$message.error("加载学院和专业信息失败")})).catch((e=>{console.error(e),this.$message.error("加载学院和专业信息失败")}))},submit_register_form({values:e,errors:r}){this.is_form_all_required_not_null()&&(this.set_is_register_btn_loading(!0),l.Z.register_student({user_id:this.form.user_id,passwd:this.form.passwd,name:this.form.name,gender:this.form.gender,department_code:this.form.department,major_code:this.form.major,enrollment_date:this.form.enrollment_date,created_by:this.user_id}).then((e=>{this.set_is_register_btn_loading(!1),201!=e.status_code?this.$message.error("创建失败，"+e.status_text):(this.clear_form(),this.$message.info("创建成功"))})).catch((e=>{this.set_is_register_btn_loading(!1),console.error(e),this.$message.error("创建失败，出现异常")})))}}},n=t(89);const i=(0,n.Z)(s,[["render",o]]);var u=i}}]);
//# sourceMappingURL=827.d5d475e9.js.map
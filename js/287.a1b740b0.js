"use strict";(self["webpackChunkicebee_web"]=self["webpackChunkicebee_web"]||[]).push([[287],{5349:function(e,t,a){var r=a(6513);t.Z={register_student(e){return(0,r.Z)({url:"/admin/register_student",method:"post",data:e})},get_department_and_major(){return(0,r.Z)({url:"/info/department_and_major",method:"get"})},register_teacher(e){return(0,r.Z)({url:"/admin/register_teacher",method:"post",data:e})},register_admin(e){return(0,r.Z)({url:"/admin/register_admin",method:"post",data:e})},get_courses_pending_approval_list(){return(0,r.Z)({url:"/admin/course/pending_list",method:"get"})},approve_course_application(e){return(0,r.Z)({url:"/admin/course/approve_application",method:"post",data:e})},get_courses_not_pending_approval_list(){return(0,r.Z)({url:"/admin/course/not_pending_list",method:"get"})},get_course_info_by_id(e){return(0,r.Z)({url:"/admin/course/info",method:"get",params:e})}}},6287:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(3396),s=a(9242);const i=(0,r._)("h1",{style:{"font-size":"23px"}},"课程详情",-1);function n(e,t,a,n,o,u){const _=(0,r.up)("a-divider"),l=(0,r.up)("a-input-search"),d=(0,r.up)("a-space"),c=(0,r.up)("a-layout-header"),h=(0,r.up)("a-descriptions"),m=(0,r.up)("a-table"),p=(0,r.up)("a-layout-content"),g=(0,r.up)("a-layout");return(0,r.wg)(),(0,r.j4)(g,{style:{height:"100vh",width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:{"margin-left":"2%"}},{split:(0,r.w5)((()=>[(0,r.Wm)(_,{direction:"vertical"})])),default:(0,r.w5)((()=>[i,(0,r.Wm)(l,{style:{width:"320px"},"search-button":"",modelValue:o.search_input,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search_input=e),placeholder:"请输入课程号",onSearch:u.get_course_info_by_id},null,8,["modelValue","onSearch"])])),_:1})])),_:1}),(0,r.wy)((0,r.Wm)(p,{style:{width:"100%","margin-top":"5%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{style:{width:"80%",margin:"auto"},data:o.course_info_to_show,bordered:"",column:2},null,8,["data"]),(0,r.Wm)(m,{columns:o.time_table_columns,data:o.time_table,"virtual-list-props":{height:400},pagination:!1,style:{width:"80%",height:"50%",margin:"auto"},scroll:{y:"100%"},expandable:e.expandable},null,8,["columns","data","expandable"])])),_:1},512),[[s.F8,0!==Object.keys(o.course_info).length]])])),_:1})}var o=a(5349),u={data(){return{user_id:"",search_input:"",is_searching:!1,course_info:{},course_info_to_show:[],time_table_columns:[{title:"上课时间",dataIndex:"time"},{title:"教室",dataIndex:"classroom"}],time_table:[]}},mounted(){this.user_id=this.$route.query.user_id,this.search_input=this.$route.query.course_id,this.get_course_info_by_id()},methods:{set_is_searching(e){this.is_searching=e},transform_course_info_to_show(e){return[{label:"课程号",value:e.course_id},{label:"课程名",value:e.course_name},{label:"学分",value:e.credit},{label:"最大选课人数",value:e.max_student_number},{label:"当前选课人数",value:e.current_student_number},{label:"授课教师",value:e.teacher_info.user_name},{label:"教师职工号",value:e.teacher_info.user_id},{label:"教师性别",value:e.teacher_info.gender}]},get_course_info_by_id(){void 0!==this.search_input&&""!==this.search_input&&(1!=this.is_searching?(this.set_is_searching(!0),o.Z.get_course_info_by_id({course_id:this.search_input}).then((e=>{this.$message.clear(),this.set_is_searching(!1),200==e.status_code?(this.course_info=e.data,this.course_info_to_show=this.transform_course_info_to_show(this.course_info),this.time_table=function(e){return e.map((e=>{let t=new Date(e.date).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"long"});return{time:`${t}，第${e.lesson}节课`,classroom:e.classroom}}))}(this.course_info.time_table_list)):this.$message.error("搜索失败，"+e.status_text)})).catch((e=>{this.set_is_searching(!1),this.$message.clear(),this.$message.error("搜索失败，出现异常"),console.error(e)}))):this.$message.info("搜索中，请稍后"))}}},_=a(89);const l=(0,_.Z)(u,[["render",n]]);var d=l}}]);
//# sourceMappingURL=287.a1b740b0.js.map
"use strict";(self["webpackChunkicebee_web"]=self["webpackChunkicebee_web"]||[]).push([[266],{5349:function(t,e,a){var n=a(6513);e.Z={register_student(t){return(0,n.Z)({url:"/admin/register_student",method:"post",data:t})},get_department_and_major(){return(0,n.Z)({url:"/info/department_and_major",method:"get"})},register_teacher(t){return(0,n.Z)({url:"/admin/register_teacher",method:"post",data:t})},register_admin(t){return(0,n.Z)({url:"/admin/register_admin",method:"post",data:t})},get_courses_pending_approval_list(){return(0,n.Z)({url:"/admin/course/pending_list",method:"get"})},approve_course_application(t){return(0,n.Z)({url:"/admin/course/approve_application",method:"post",data:t})},get_courses_not_pending_approval_list(){return(0,n.Z)({url:"/admin/course/not_pending_list",method:"get"})},get_course_info_by_id(t){return(0,n.Z)({url:"/admin/course/info",method:"get",params:t})}}},2266:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var n=a(3396),s=a(7139),o=a(9242);const i=(0,n._)("h1",{style:{"font-size":"23px"}},"待审批的课程",-1);function r(t,e,a,r,l,u){const d=(0,n.up)("a-divider"),_=(0,n.up)("a-button"),p=(0,n.up)("a-space"),c=(0,n.up)("a-layout-header"),m=(0,n.up)("a-popconfirm"),g=(0,n.up)("a-table"),h=(0,n.up)("a-layout-content"),w=(0,n.up)("a-layout");return(0,n.wg)(),(0,n.j4)(w,{style:{height:"100vh",width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{style:{"margin-left":"2%"}},{split:(0,n.w5)((()=>[(0,n.Wm)(d,{direction:"vertical"})])),default:(0,n.w5)((()=>[i,(0,n.Wm)(_,{type:"primary",loading:l.get_all_loading,onClick:u.get_courses},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(l.get_all_loading?"加载中":"重新加载"),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1}),(0,n.Wm)(h,{style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{columns:l.columns,data:l.course_list,style:{width:"100%"},scroll:{x:"100%",y:"100%"},expandable:t.expandable},{optional:(0,n.w5)((({record:t})=>[(0,n.wy)((0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"outline",onClick:()=>{}},{default:(0,n.w5)((()=>[(0,n.Uk)("详情")])),_:1}),(0,n.Wm)(m,{content:"确认审批通过该申请",position:"tr","ok-text":"确认通过",onOk:e=>u.approve(t,"approved")},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"outline",status:"success"},{default:(0,n.w5)((()=>[(0,n.Uk)("通过")])),_:1})])),_:2},1032,["onOk"]),(0,n.Wm)(m,{content:"确认审批否决该申请",position:"tr",type:"warning","ok-text":"确认否决",onOk:e=>u.approve(t,"rejected")},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"outline",status:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)("否决")])),_:1})])),_:2},1032,["onOk"])])),_:2},1536),[[o.F8,"pending"==t.status]]),(0,n.wy)((0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"outline",onClick:()=>{}},{default:(0,n.w5)((()=>[(0,n.Uk)("详情")])),_:1}),(0,n.Wm)(_,{type:"outline",status:"success"},{default:(0,n.w5)((()=>[(0,n.Uk)("已通过")])),_:1})])),_:2},1536),[[o.F8,"approved"==t.status]]),(0,n.wy)((0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"outline",onClick:()=>{}},{default:(0,n.w5)((()=>[(0,n.Uk)("详情")])),_:1}),(0,n.Wm)(_,{type:"outline",status:"warning"},{default:(0,n.w5)((()=>[(0,n.Uk)("已否决")])),_:1})])),_:2},1536),[[o.F8,"rejected"==t.status]])])),_:1},8,["columns","data","expandable"])])),_:1})])),_:1})}var l=a(5349),u={data(){return{user_id:"",columns:[{title:"操作",slotName:"optional",width:250,fixed:"left"},{title:"申请序号",dataIndex:"application_id",width:100,fixed:"left"},{title:"课程名",dataIndex:"course_name"},{title:"授课教师",dataIndex:"teacher_info.user_name"},{title:"学分",dataIndex:"credit"},{title:"最大可选人数",dataIndex:"max_student_number"}],course_list:[],get_all_loading:!1}},mounted(){this.user_id=this.$route.query.user_id,this.get_courses()},methods:{set_get_all_btn_loading(t){this.get_all_loading=t},get_courses(){this.set_get_all_btn_loading(!0),l.Z.get_courses_pending_approval_list().then((t=>{this.set_get_all_btn_loading(!1),200==t.status_code?(this.course_list=t.data,console.log(t.data)):this.$message.error("加载失败，"+t.status_text)})).catch((t=>{this.set_get_all_btn_loading(!1),this.$message.error("加载失败，出现异常"),console.error(t)}))},approve(t,e){l.Z.approve_course_application({application_id:t.application_id,approve_result:e,admin_id:this.user_id}).then((a=>{200==a.status_code?(this.$message.info("审批成功"),t.status=e,console.log(a)):this.$message.error("操作失败，"+a.status_text)})).catch((t=>{this.$message.error("操作失败，出现异常"),console.error(t)}))}}},d=a(89);const _=(0,d.Z)(u,[["render",r]]);var p=_}}]);
//# sourceMappingURL=266.392f26ba.js.map
{"version":3,"file":"js/827.d5d475e9.js","mappings":"iIAEA,KAEEA,gBAAAA,CAAiBC,GAUf,OAAOC,EAAAA,EAAAA,GAAS,CACdC,IAAK,0BACLC,OAAQ,OACRC,KAAMJ,GAEV,EAGAK,wBAAAA,GACE,OAAOJ,EAAAA,EAAAA,GAAS,CACdC,IAAK,6BACLC,OAAQ,OAEZ,EAGAG,gBAAAA,CAAiBC,GAOf,OAAON,EAAAA,EAAAA,GAAS,CACdC,IAAK,0BACLC,OAAQ,OACRC,KAAMG,GAEV,EAGAC,cAAAA,CAAeC,GAOb,OAAOR,EAAAA,EAAAA,GAAS,CACdC,IAAK,wBACLC,OAAQ,OACRC,KAAMK,GAEV,EAGAC,iCAAAA,GACE,OAAOT,EAAAA,EAAAA,GAAS,CACdC,IAAK,6BACLC,OAAQ,OAEZ,EAGAQ,0BAAAA,CAA2BC,GAKzB,OAAOX,EAAAA,EAAAA,GAAS,CACdC,IAAK,oCACLC,OAAQ,OACRC,KAAMQ,GAEV,EAGAC,qCAAAA,GACE,OAAOZ,EAAAA,EAAAA,GAAS,CACdC,IAAK,iCACLC,OAAQ,OAEZ,EAGAW,qBAAAA,CAAsBC,GAGpB,OAAOd,EAAAA,EAAAA,GAAS,CACdC,IAAK,qBACLC,OAAQ,MACRa,OAAQD,GAEZ,E,oGC5FIE,EAAAA,EAAAA,GAAwC,MAApCC,MAAA,sBAAyB,UAAM,G,oQAJvCC,EAAAA,EAAAA,IAsESC,EAAA,CAtEAC,MAAOC,EAAAC,KAAOC,SAAQC,EAAAC,qBAAsBR,MAAA,qD,mBAGnD,IAEc,EAFdS,EAAAA,EAAAA,IAEcC,EAAA,M,kBADZ,IAAwC,CAAxCC,K,OAIFF,EAAAA,EAAAA,IAGcC,EAAA,CAHDE,MAAM,UAAUC,MAAM,KAAMC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,UAC7C,mBAAkB,CAAC,SAAU,U,mBAC9B,IAAkC,EAAlCP,EAAAA,EAAAA,IAAkCQ,EAAA,C,WAAhBb,EAAAC,KAAKa,Q,qCAALd,EAAAC,KAAKa,QAAOC,I,iCAIhCV,EAAAA,EAAAA,IAEcC,EAAA,CAFDE,MAAM,SAASC,MAAM,KAAMC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,a,mBAC7C,IAAiC,EAAjCP,EAAAA,EAAAA,IAAiCQ,EAAA,C,WAAfb,EAAAC,KAAKe,O,qCAALhB,EAAAC,KAAKe,OAAMD,I,iCAI/BV,EAAAA,EAAAA,IAEcC,EAAA,CAFDE,MAAM,OAAOC,MAAM,KAAMC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,W,mBAC3C,IAA+B,EAA/BP,EAAAA,EAAAA,IAA+BQ,EAAA,C,WAAbb,EAAAC,KAAKgB,K,qCAALjB,EAAAC,KAAKgB,KAAIF,I,iCAI7BV,EAAAA,EAAAA,IAKcC,EAAA,CALDE,MAAM,SAASC,MAAM,KAAMC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,W,mBAC7C,IAGW,EAHXP,EAAAA,EAAAA,IAGWa,EAAA,C,WAHQlB,EAAAC,KAAKkB,O,qCAALnB,EAAAC,KAAKkB,OAAMJ,I,mBAC5B,IAAgC,EAAhCV,EAAAA,EAAAA,IAAgCe,EAAA,CAAtBC,MAAM,KAAG,C,kBAAC,IAAC,UAAD,Q,OACpBhB,EAAAA,EAAAA,IAAgCe,EAAA,CAAtBC,MAAM,KAAG,C,kBAAC,IAAC,UAAD,Q,0CAKxBhB,EAAAA,EAAAA,IAScC,EAAA,CATDE,MAAM,aAAaC,MAAM,KAAMC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,W,mBACjD,IAOW,EAPXP,EAAAA,EAAAA,IAOWa,EAAA,C,WAPQlB,EAAAC,KAAKqB,W,qCAALtB,EAAAC,KAAKqB,WAAUP,GAAGQ,SAAMC,EAAA,KAAAA,EAAA,Q,KAA0BvB,KAAKwB,MAAK,G,KAAsBC,oBAAmB,KAAQC,qBAAqBC,MAAKC,GAAOA,EAAIC,OAAI,KAAU7B,KAAKqB,YAAU,I,mBAItL,IAA0C,gBAApDS,EAAAA,EAAAA,IAEWC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFoBjC,EAAA2B,sBAAdL,K,WAAjBzB,EAAAA,EAAAA,IAEWuB,EAAA,CAF2CC,MAAOC,EAAWQ,M,mBACtE,IAAqB,mBAAlBR,EAAWL,MAAI,M,kEAMxBZ,EAAAA,EAAAA,IAMcC,EAAA,CANDE,MAAM,QAAQC,MAAM,KAAMC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,W,mBAC5C,IAIW,EAJXP,EAAAA,EAAAA,IAIWa,EAAA,C,WAJQlB,EAAAC,KAAKwB,M,qCAALzB,EAAAC,KAAKwB,MAAKV,I,mBACjB,IAA0C,gBAApDgB,EAAAA,EAAAA,IAEWC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFejC,EAAA0B,oBAAoBD,OAA7BA,K,WAAjB5B,EAAAA,EAAAA,IAEWuB,EAAA,CAF2CC,MAAOI,EAAMK,KAAOI,IAAKT,EAAMK,M,mBACnF,IAAgB,mBAAbL,EAAMR,MAAI,M,kEAMnBZ,EAAAA,EAAAA,IAGcC,EAAA,CAHDE,MAAM,kBAAkBC,MAAM,OACxCC,MAAO,CAAC,CAADC,UAAA,EAAAC,QAAA,a,mBACR,IAA+C,EAA/CP,EAAAA,EAAAA,IAA+C8B,EAAA,C,WAAvBnC,EAAAC,KAAKmC,gB,qCAALpC,EAAAC,KAAKmC,gBAAerB,I,iCAI9CV,EAAAA,EAAAA,IAUcC,EAAA,M,kBATZ,IAQU,EARVD,EAAAA,EAAAA,IAQUgC,EAAA,MAPGC,OAAKC,EAAAA,EAAAA,KAAC,IAAkC,EAAlClC,EAAAA,EAAAA,IAAkCmC,EAAA,CAAvBC,UAAU,gB,kBACtC,IAEW,EAFXpC,EAAAA,EAAAA,IAEWqC,EAAA,CAFDC,KAAK,UAAU,YAAU,SAAUC,QAAS5C,EAAA6C,kB,mBAAkB,IAExE,UAFwE,e,qBAGxExC,EAAAA,EAAAA,IAEWqC,EAAA,CAFAI,QAAO3C,EAAA4C,YAAU,C,kBAAE,IAE9B,UAF8B,a,oFAWtC,GACEjE,IAAAA,GACE,MAAO,CAELgC,QAAS,GAGTb,KAAM,CACJa,QAAS,GACTE,OAAQ,GACRC,KAAM,GACNE,OAAQ,GACRG,WAAY,GACZG,MAAO,GACPW,gBAAiB,IAInBV,oBAAqB,CAAC,EAEtBC,qBAAsB,GActBkB,kBAAkB,EAEtB,EAEAG,OAAAA,GACEC,KAAKnC,QAAUmC,KAAKC,OAAOC,MAAMrC,QACjCmC,KAAKlE,0BACP,EAEAqE,QAAS,CAEPL,UAAAA,GACEE,KAAKhD,KAAKa,QAAa,GACvBmC,KAAKhD,KAAKe,OAAa,GACvBiC,KAAKhD,KAAKgB,KAAa,GACvBgC,KAAKhD,KAAKkB,OAAa,GACvB8B,KAAKhD,KAAKqB,WAAa,GACvB2B,KAAKhD,KAAKwB,MAAa,GACvBwB,KAAKhD,KAAKmC,gBAAkB,EAC9B,EAGAiB,6BAAAA,GACE,MAAiC,IAAxBJ,KAAKhD,KAAKa,SACc,IAAxBmC,KAAKhD,KAAKe,QACc,IAAxBiC,KAAKhD,KAAKgB,MACc,IAAxBgC,KAAKhD,KAAKkB,QACc,IAAxB8B,KAAKhD,KAAKqB,YACc,IAAxB2B,KAAKhD,KAAKwB,OACmB,IAA7BwB,KAAKhD,KAAKmC,eACrB,EAGAkB,2BAAAA,CAA4BC,GAC1BN,KAAKJ,iBAAmBU,CAC1B,EAGAxE,wBAAAA,GACEyE,EAAAA,EAAUzE,2BACP0E,MAAKC,IACoB,KAApBA,EAAKC,YAMTV,KAAKtB,qBAAwB,SAAU7C,GACrC,OAAO8E,OAAOC,KAAK/E,EAAKgF,OAAOC,KAAKjC,IAClC,MAAMb,EAAOnC,EAAKkF,MAAMlC,GACxB,MAAO,CAAEA,OAAMb,OACbQ,MAAO3C,EAAKgF,MAAMhC,GAAMiC,KAAIE,IACnB,CAAEnC,KAAMmC,EAAWhD,KAAMnC,EAAKkF,MAAMC,OACzC,GAEV,CAR6B,CAQ1BP,EAAK5E,MAbNmE,KAAKiB,SAASC,MAAM,cAaT,IAGdC,OAAMC,IACLC,QAAQH,MAAME,GACdpB,KAAKiB,SAASC,MAAM,cAAc,GAExC,EAGA/D,oBAAAA,EAAqB,OAAEmE,EAAM,OAAEC,IACxBvB,KAAKI,kCAIVJ,KAAKK,6BAA4B,GAGjCE,EAAAA,EAAU/E,iBAAiB,CACzBqC,QAAkBmC,KAAKhD,KAAKa,QAC5BE,OAAkBiC,KAAKhD,KAAKe,OAC5BC,KAAkBgC,KAAKhD,KAAKgB,KAC5BE,OAAkB8B,KAAKhD,KAAKkB,OAC5BsD,gBAAkBxB,KAAKhD,KAAKqB,WAC5BoD,WAAkBzB,KAAKhD,KAAKwB,MAC5BW,gBAAkBa,KAAKhD,KAAKmC,gBAC5BuC,WAAkB1B,KAAKnC,UAExB2C,MAAKC,IACJT,KAAKK,6BAA4B,GAET,KAApBI,EAAKC,YACPV,KAAKiB,SAASC,MAAM,QAAUT,EAAKkB,cAGnC3B,KAAKF,aACLE,KAAKiB,SAASW,KAAK,QACrB,IAEDT,OAAMC,IACLpB,KAAKK,6BAA4B,GAEjCgB,QAAQH,MAAME,GACdpB,KAAKiB,SAASC,MAAM,YAAY,IAEpC,I,QC9MJ,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://icebee-web/./src/api/admin/admin-api.js","webpack://icebee-web/./src/pages/admin/account/student/RegisterPage.vue","webpack://icebee-web/./src/pages/admin/account/student/RegisterPage.vue?2cc7"],"sourcesContent":["import http_req from \"@/utils/http-req\"\r\n\r\nexport default {\r\n  /* INTRO: 注册学生账号 */\r\n  register_student(register_student_DTO/* : {\r\n    user_id         : String,\r\n    passwd          : String,\r\n    name            : String,\r\n    gender          : String,\r\n    department      : String,\r\n    major           : String,\r\n    enrollment_date : String,\r\n    created_by      : String\r\n  } */) {\r\n    return http_req({\r\n      url: \"/admin/register_student\",\r\n      method: \"post\",\r\n      data: register_student_DTO\r\n    })\r\n  },\r\n\r\n  /* INTRO: 获取院系和专业 */\r\n  get_department_and_major() {\r\n    return http_req({\r\n      url: \"/info/department_and_major\",\r\n      method: \"get\"\r\n    })\r\n  },\r\n\r\n  /* INTRO: 注册教师账号 */\r\n  register_teacher(register_teacher_DTO/* : {\r\n    user_id    : String,\r\n    passwd     : String,\r\n    name       : String,\r\n    gender     : String,\r\n    created_by : String\r\n  } */) {\r\n    return http_req({\r\n      url: \"/admin/register_teacher\",\r\n      method: \"post\",\r\n      data: register_teacher_DTO\r\n    })\r\n  },\r\n\r\n  /* INTRO: 注册管理员账号 */\r\n  register_admin(register_admin_DTO/* : {\r\n    user_id    : String,\r\n    passwd     : String,\r\n    name       : String,\r\n    gender     : String,\r\n    created_by : String\r\n  } */) {\r\n    return http_req({\r\n      url: \"/admin/register_admin\",\r\n      method: \"post\",\r\n      data: register_admin_DTO\r\n    })\r\n  },\r\n\r\n  /* INTRO: 获取待审批的课程列表 */\r\n  get_courses_pending_approval_list() {\r\n    return http_req({\r\n      url: \"/admin/course/pending_list\",\r\n      method: \"get\"\r\n    })\r\n  },\r\n\r\n  /* INTRO: 审批课程申请 */\r\n  approve_course_application(approve_course_application_DTO/* : {\r\n    application_id : Long,\r\n    approve_result : enum('approved', 'rejected')\r\n    admin_id       : String,\r\n  } */) {\r\n    return http_req({\r\n      url: \"/admin/course/approve_application\",\r\n      method: \"post\",\r\n      data: approve_course_application_DTO\r\n    })\r\n  },\r\n  \r\n  /* INTRO: 获取已审批的课程列表 */\r\n  get_courses_not_pending_approval_list() {\r\n    return http_req({\r\n      url: \"/admin/course/not_pending_list\",\r\n      method: \"get\"\r\n    })\r\n  },\r\n\r\n  /* INTRO: 通过课程号获取课程详情 */\r\n  get_course_info_by_id(get_course_info_DTO/* : {\r\n    course_id : String\r\n  } */) {\r\n    return http_req({\r\n      url: \"/admin/course/info\",\r\n      method: \"get\",\r\n      params: get_course_info_DTO\r\n    })\r\n  }\r\n}\r\n","<template>\r\n  <a-form :model=\"form\" @submit=\"submit_register_form\" style=\"width: 60%; margin-top: 5%; margin-left: 10%;\">\r\n\r\n    <!-- 标题 -->\r\n    <a-form-item>\r\n      <h1 style=\"font-size: 25px;\">录入学生账号</h1>\r\n    </a-form-item>\r\n\r\n    <!-- 学号 -->\r\n    <a-form-item field=\"user_id\" label=\"学号\" :rules=\"[{ required: true, message: '请输入学号' }]\"\r\n      :validate-trigger=\"['change', 'input']\">\r\n      <a-input v-model=\"form.user_id\" />\r\n    </a-form-item>\r\n\r\n    <!-- 密码 -->\r\n    <a-form-item field=\"passwd\" label=\"密码\" :rules=\"[{ required: true, message: '请设置账号密码' }]\">\r\n      <a-input v-model=\"form.passwd\" />\r\n    </a-form-item>\r\n\r\n    <!-- 姓名 -->\r\n    <a-form-item field=\"name\" label=\"姓名\" :rules=\"[{ required: true, message: '请输入姓名' }]\">\r\n      <a-input v-model=\"form.name\" />\r\n    </a-form-item>\r\n\r\n    <!-- 性别 -->\r\n    <a-form-item field=\"gender\" label=\"性别\" :rules=\"[{ required: true, message: '请选择性别' }]\">\r\n      <a-select v-model=\"form.gender\">\r\n        <a-option value=\"男\">男</a-option>\r\n        <a-option value=\"女\">女</a-option>\r\n      </a-select>\r\n    </a-form-item>\r\n\r\n    <!-- 院系 -->\r\n    <a-form-item field=\"department\" label=\"院系\" :rules=\"[{ required: true, message: '请选择院系' }]\">\r\n      <a-select v-model=\"form.department\" @change=\"() => {\r\n          this.form.major = ''\r\n          this.selected_department = this.department_and_major.find(dep => dep.code === this.form.department)\r\n        }\">\r\n        <a-option v-for=\"department of department_and_major\" :value=\"department.code\">\r\n          {{ department.name }}\r\n        </a-option>\r\n      </a-select>\r\n    </a-form-item>\r\n\r\n    <!-- 专业 -->\r\n    <a-form-item field=\"major\" label=\"专业\" :rules=\"[{ required: true, message: '请选择专业' }]\">\r\n      <a-select v-model=\"form.major\">\r\n        <a-option v-for=\"major in selected_department.major\" :value=\"major.code\" :key=\"major.code\">\r\n          {{ major.name }}\r\n        </a-option>\r\n      </a-select>\r\n    </a-form-item>\r\n\r\n    <!-- 入学日期 -->\r\n    <a-form-item field=\"enrollment_date\" label=\"入学日期\"\r\n      :rules=\"[{ required: true, message: '请选择入学日期' }]\">\r\n      <a-date-picker v-model=\"form.enrollment_date\"/>\r\n    </a-form-item>\r\n\r\n    <!-- 按钮 -->\r\n    <a-form-item>\r\n      <a-space>\r\n        <template #split><a-divider direction=\"vertical\" /></template>\r\n        <a-button type=\"primary\" html-type=\"submit\" :loading=\"register_loading\">\r\n          创建学生账号\r\n        </a-button>\r\n        <a-button @click=\"clear_form\">\r\n          清空输入\r\n        </a-button>\r\n      </a-space>\r\n    </a-form-item>\r\n  </a-form>\r\n</template>\r\n\r\n<script>\r\nimport admin_api from '@/api/admin/admin-api'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      /* INTRO: 管理员的id */\r\n      user_id: \"\",\r\n\r\n      /* INTRO: 注册表单 */\r\n      form: {\r\n        user_id: \"\",\r\n        passwd: \"\",\r\n        name: \"\",\r\n        gender: \"\",\r\n        department: \"\", /* 院系code */\r\n        major: \"\",  /* 专业code */\r\n        enrollment_date: \"\"\r\n      },\r\n\r\n      /* INTRO:所选择的院系在`department_and_major`中的索引 */\r\n      selected_department: {},\r\n      /* INTRO: 院系和专业信息 */\r\n      department_and_major: [/*\r\n        {\r\n          code: String,\r\n          name: String,\r\n          major: [\r\n            {code: String, name: String},\r\n            {code: String, name: String},\r\n            ...\r\n          ]\r\n        },\r\n        ...\r\n      */],\r\n\r\n      /* INTRO: 注册按钮的加载状态 */\r\n      register_loading: false\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.user_id = this.$route.query.user_id\r\n    this.get_department_and_major()\r\n  },\r\n\r\n  methods: {\r\n    /* INTRO: 清空表单 */\r\n    clear_form() {\r\n      this.form.user_id    = \"\"\r\n      this.form.passwd     = \"\"\r\n      this.form.name       = \"\"\r\n      this.form.gender     = \"\"\r\n      this.form.department = \"\"\r\n      this.form.major      = \"\"\r\n      this.form.enrollment_date = \"\"\r\n    },\r\n\r\n    /* INTRO: 判断已填所有的必填项 */\r\n    is_form_all_required_not_null() {\r\n      return ( this.form.user_id    != \"\"\r\n            && this.form.passwd     != \"\"\r\n            && this.form.name       != \"\"\r\n            && this.form.gender     != \"\"\r\n            && this.form.department != \"\"\r\n            && this.form.major      != \"\"\r\n            && this.form.enrollment_date != \"\" )\r\n    },\r\n\r\n    /* INTRO: 设置注册按钮的加载状态 */\r\n    set_is_register_btn_loading(is_loading) {\r\n      this.register_loading = is_loading\r\n    },\r\n\r\n    /* INTRO: 获取学院和专业信息 */\r\n    get_department_and_major() {\r\n      admin_api.get_department_and_major()\r\n        .then(resp => {\r\n          if (resp.status_code != 200) {\r\n            this.$message.error(\"加载学院和专业信息失败\")\r\n            return\r\n          }\r\n\r\n          /* INTRO: 转换格式 */\r\n          this.department_and_major = (function (data) {\r\n            return Object.keys(data.codes).map((code) => {\r\n              const name = data.names[code];\r\n              return { code, name,\r\n                major: data.codes[code].map(majorCode => {\r\n                  return { code: majorCode, name: data.names[majorCode] };\r\n                }) };\r\n            });\r\n          })(resp.data)\r\n\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n          this.$message.error(\"加载学院和专业信息失败\")\r\n        })\r\n    },\r\n\r\n    /* INTRO: 注册账号 */\r\n    submit_register_form({ values, errors }) {\r\n      if (!this.is_form_all_required_not_null()) {\r\n        return\r\n      }\r\n\r\n      this.set_is_register_btn_loading(true)\r\n\r\n      /* INTRO: 发送请求 */\r\n      admin_api.register_student({\r\n        user_id         : this.form.user_id,\r\n        passwd          : this.form.passwd,\r\n        name            : this.form.name,\r\n        gender          : this.form.gender,\r\n        department_code : this.form.department,\r\n        major_code      : this.form.major,\r\n        enrollment_date : this.form.enrollment_date,\r\n        created_by      : this.user_id,\r\n      })\r\n      .then(resp => {\r\n        this.set_is_register_btn_loading(false)\r\n\r\n        if (resp.status_code != 201) {\r\n          this.$message.error(\"创建失败，\" + resp.status_text)\r\n        }\r\n        else {\r\n          this.clear_form()\r\n          this.$message.info(\"创建成功\")\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.set_is_register_btn_loading(false)\r\n\r\n        console.error(err)\r\n        this.$message.error(\"创建失败，出现异常\")\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped></style>","import { render } from \"./RegisterPage.vue?vue&type=template&id=f9820eac\"\nimport script from \"./RegisterPage.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["register_student","register_student_DTO","http_req","url","method","data","get_department_and_major","register_teacher","register_teacher_DTO","register_admin","register_admin_DTO","get_courses_pending_approval_list","approve_course_application","approve_course_application_DTO","get_courses_not_pending_approval_list","get_course_info_by_id","get_course_info_DTO","params","_createElementVNode","style","_createBlock","_component_a_form","model","$data","form","onSubmit","$options","submit_register_form","_createVNode","_component_a_form_item","_hoisted_1","field","label","rules","required","message","_component_a_input","user_id","$event","passwd","name","_component_a_select","gender","_component_a_option","value","department","onChange","_cache","major","selected_department","department_and_major","find","dep","code","_createElementBlock","_Fragment","_renderList","key","_component_a_date_picker","enrollment_date","_component_a_space","split","_withCtx","_component_a_divider","direction","_component_a_button","type","loading","register_loading","onClick","clear_form","mounted","this","$route","query","methods","is_form_all_required_not_null","set_is_register_btn_loading","is_loading","admin_api","then","resp","status_code","Object","keys","codes","map","names","majorCode","$message","error","catch","err","console","values","errors","department_code","major_code","created_by","status_text","info","__exports__","render"],"sourceRoot":""}
"use strict";(self["webpackChunkicebee_web"]=self["webpackChunkicebee_web"]||[]).push([[584],{9584:function(e,s,t){t.r(s),t.d(s,{default:function(){return c}});var i=t(3396),o=t(7139);const l=e=>((0,i.dD)("data-v-5c978dbe"),e=e(),(0,i.Cn)(),e),a=l((()=>(0,i._)("div",{style:{width:"100%",height:"100vh",position:"fixed","z-index":"-1"}},[(0,i._)("video",{src:"https://www.yuanshen.com/medias/bg.3e78e808.mp4",preload:"auto",muted:"muted",loop:"loop",autoplay:"autoplay",style:{width:"100%"}})],-1))),n={class:"login-form"},r=l((()=>(0,i._)("h1",{class:"login-form-item login-form-title"}," icebee 高校教务管理系统 ",-1))),_={class:"login_err_tip"};function d(e,s,t,l,d,u){const g=(0,i.up)("a-col"),m=(0,i.up)("icon-user"),h=(0,i.up)("a-input"),p=(0,i.up)("icon-lock"),c=(0,i.up)("a-button"),w=(0,i.up)("a-link"),f=(0,i.up)("a-row");return(0,i.wg)(),(0,i.iD)(i.HY,null,[a,(0,i.Wm)(f,{id:"main"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{flex:"1"}),(0,i.Wm)(g,{flex:"0",style:{"padding-top":"150px"}},{default:(0,i.w5)((()=>[(0,i._)("div",n,[r,(0,i.Wm)(h,{class:"login-form-item login-form-input",modelValue:d.user_id,"onUpdate:modelValue":s[0]||(s[0]=e=>d.user_id=e),placeholder:"请输入学号 / 职工号"},{prefix:(0,i.w5)((()=>[(0,i.Wm)(m)])),_:1},8,["modelValue"]),(0,i.Wm)(h,{class:"login-form-item login-form-input",modelValue:d.passwd,"onUpdate:modelValue":s[1]||(s[1]=e=>d.passwd=e),type:"password",placeholder:"请输入密码"},{prefix:(0,i.w5)((()=>[(0,i.Wm)(p)])),_:1},8,["modelValue"]),(0,i._)("span",_,(0,o.zw)(d.login_err_msg),1),(0,i.Wm)(c,{class:"login-form-item",type:"primary",long:"",loading:d.login_btn_loading,onClick:u.login},{default:(0,i.w5)((()=>[(0,i.Uk)(" 登录 ")])),_:1},8,["loading","onClick"]),(0,i.Wm)(w,{class:"link",hoverable:!1,icon:""},{default:(0,i.w5)((()=>[(0,i.Uk)(" 忘记密码 / 账号申诉 ")])),_:1}),(0,i.Wm)(w,{class:"link",hoverable:!1,icon:"",style:{float:"right"},href:"https://ys.mihoyo.com/main/"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 官网 ")])),_:1})])])),_:1}),(0,i.Wm)(g,{flex:"1"})])),_:1})],64)}t(560);var u=t(6513),g={login(e){return(0,u.Z)({url:"/user/login",method:"post",data:e})}},m={data(){return{user_id:"",passwd:"",login_err_msg:"",login_btn_loading:!1}},methods:{clear_passwd(){this.passwd=""},set_login_err_msg(e){this.login_err_msg=e},set_is_login_btn_loading(e){this.login_btn_loading=e},login(){""!==this.user_id?""!==this.passwd?(this.set_login_err_msg(""),this.set_is_login_btn_loading(!0),g.login({user_id:this.user_id,passwd:this.passwd}).then((e=>{if(this.set_is_login_btn_loading(!1),this.clear_passwd(),200!=e.status_code)return void(401==e.status_code?this.set_login_err_msg("账号不存在，或密码错误"):this.set_login_err_msg(e.status_text+" / "+e.data));let s={user_id:e.data.user_id,role:e.data.role};"student"===e.data.role?this.$router.push({path:"/student/home",query:s}):"teacher"===e.data.role?this.$router.push({path:"/teacher/home",query:s}):"admin"===e.data.role?this.$router.push({path:"/admin/home",query:s}):this.set_login_err_msg("未知的用户身份")})).catch((e=>{this.set_is_login_btn_loading(!1),this.clear_passwd(),"ERR_NETWORK"===e.code?this.set_login_err_msg("网络错误"):this.set_login_err_msg(e.message)}))):this.set_login_err_msg("未填写密码"):this.set_login_err_msg("未填写学号 / 职工号")}}},h=t(89);const p=(0,h.Z)(m,[["render",d],["__scopeId","data-v-5c978dbe"]]);var c=p}}]);
//# sourceMappingURL=584.4ae012e7.js.map